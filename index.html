<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Celectium versions</title>

<style>
html, body {
    height: 100%;
    margin: 0;
}

body {
    background-image: url("background.png");
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    padding: 20px;
    font-family: Arial, sans-serif;
}

a {
    display: block;
    color: white;
    text-decoration: none;
}

a:visited {
    color: rgb(94, 255, 0);
}

a:hover {
    color: rgb(255, 230, 0);
    text-decoration: underline;
}
</style>
</head>

<body>

<div id="versions">Loading versions...</div>

<script>
const BASE_URL = "https://snow-storm324.github.io/Celectium/";
const container = document.getElementById("versions");

async function versionExists(version) {
    try {
        const response = await fetch(`${BASE_URL}v${version}/`, { method: "HEAD" });
        return response.ok;
    } catch {
        return false;
    }
}

async function loadVersions() {
    container.textContent = "";
    let version = 0;
    let versions = [];

    while (await versionExists(version)) {
        versions.push(version);
        version++;
    }

    if (versions.length === 0) {
        container.textContent = "No versions found.";
        return;
    }

    const latest = versions[versions.length - 1];

    const params = new URLSearchParams(window.location.search);
    if (params.has("latest")) {
        window.location.replace(`${BASE_URL}v${latest}/`);
        return;
    }

    for (const v of versions) {
        const link = document.createElement("a");
        link.href = `${BASE_URL}v${v}/`;
        link.textContent = `Celectium v${v}` + (v === latest ? " (latest version)" : "");
        container.appendChild(link);
    }
}

loadVersions();
</script>

</body>
</html>
